# DolphinDAQ Lil Laser database file
# Matches up with the proto file of the same name
# Built by checking against supported record types at https://paulscherrerinstitute.github.io/StreamDevice/recordtypes.html

##### Common #####

record(stringin,"$(P):info"){
    field(DESC,"Device identification")
	field(DTYP,"stream")
	field(INP,"@lillaser.proto info $(BUS)")
    field(PINI,"YES")
}

record(stringin,"$(P):debug"){
	field(DTYP,"stream")
	field(INP,"@lillaser.proto debug $(BUS)")
}

record(int64in,"$(P):trigger:count"){
    field(DESC,"Get global trigger count")
    field(SCAN,"1 second")
	field(DTYP,"stream")
	field(EGU,"trigger events")
    field(INP,"@lillaser.proto TrigCountQ $(BUS)")
}


record(int64out,"$(P):trigger:count:set"){
	field(DTYP,"stream")
	field(DRVL,"0")
	field(DRVH,"4294967295") # saved as unsigned 32-bit integer; max value is 2^32 - 1
	field(EGU,"trigger events")
    field(OUT,"@lillaser.proto TrigCount $(BUS)")
}

#### Lil Laser #####

record(int64in,"$(P):main:duration"){
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@lillaser.proto MainDurQ $(BUS)")
}

record(int64out,"$(P):main:duration:set"){
	field(DTYP,"stream")
	field(DRVL,"0")
    field(OUT,"@lillaser.proto MainDur $(BUS)")
}

record(int64in,"$(P):pre:duration"){
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@lillaser.proto PreDurQ $(BUS)")
}

record(int64out,"$(P):pre:duration:set"){
	field(DTYP,"stream")
	field(DRVL,"0")
    field(OUT,"@lillaser.proto PreDur $(BUS)")
}


record(ai,"$(P):pre:power"){
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@lillaser.proto PrePwrQ $(BUS)")
}

record(ao,"$(P):pre:power:set"){
	field(DTYP,"stream")
	field(DRVL,"0")
    field(OUT,"@lillaser.proto PrePwr $(BUS)")
}

record(ai,"$(P):main:power"){
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@lillaser.proto MainPwrQ $(BUS)")
}

record(ao,"$(P):main:power:set"){
	field(DTYP,"stream")
	field(DRVL,"0")
    field(OUT,"@lillaser.proto MainPwr $(BUS)")
}

record(bi,"$(P):output:enabled"){
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@lillaser.proto OutEnabledQ $(BUS)")
}

record(bo,"$(P):output:enabled:set"){
	field(DTYP,"stream")
    field(OUT,"@lillaser.proto OutEnabled $(BUS)")
}



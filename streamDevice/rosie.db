# DolphinDAQ Rosie database file
# Matches up with the proto file of the same name
# Built by checking against supported record types at https://paulscherrerinstitute.github.io/StreamDevice/recordtypes.html


##### Common #####

record(stringin,"$(P):info"){
    field(DESC,"Device identification")
	field(DTYP,"stream")
	field(INP,"@rosie.proto info $(BUS)")
    field(PINI,"YES")
}

record(stringin,"$(P):debug"){
	field(DTYP,"stream")
	field(INP,"@rosie.proto debug $(BUS)")
}

record(int64in,"$(P):trigger:count"){
    field(DESC,"Get global trigger count")
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@rosie.proto CountQ $(BUS)")
    }

record(int64out,"$(P):trigger:count:set"){
    field(DESC,"Set global trigger count")
	field(DTYP,"stream")
    field(OUT,"@rosie.proto Count $(BUS)")
    }

record(int64in,"$(P):trigger:decimation"){
    field(DESC,"Get global trigger decimation")
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@rosie.proto DecimationQ $(BUS)")
    }

record(int64out,"$(P):trigger:decimation:set"){
    field(DESC,"Set global trigger decimation")
	field(DTYP,"stream")
    field(OUT,"@rosie.proto Decimation $(BUS)")
    }

record(stringin,"$(P):system:time"){
	field(DTYP,"stream")
    field(SCAN,"1 second")
    field(INP,"@rosie.proto TimeQ $(BUS)")
}

record(int64in,"$(P):system:time:unix"){
	field(DTYP,"stream")
    field(SCAN,"1 second")
    field(INP,"@rosie.proto TimeUnixQ $(BUS)")
}

record(int64out,"$(P):system:time:unix:set"){
	field(DTYP,"stream")
    field(OUT,"@rosie.proto TimeUnix $(BUS)")
}

##### Rosie-Specific #####

record(bi,"$(P):output:enabled"){
    field(DESC,"Get whether TTL pulse output is enabled")
    field(SCAN,"1 second")
	field(DTYP,"stream")
	field(ZNAM,"False")
	field(ONAM,"True")
    field(INP,"@rosie.proto OutEnabledQ $(BUS)")
    }

record(bo,"$(P):output:enabled:set"){
    field(DESC,"Set whether TTL pulse output is enabled")
	field(DTYP,"stream")
	field(ZNAM,"False")
	field(ONAM,"True")
    field(OUT,"@rosie.proto OutEnabled $(BUS)")
    }

record(int64in,"$(P):output:first"){
    field(DESC,"First global trigger in set")
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@rosie.proto OutFirstQ $(BUS)")
    }

record(int64in,"$(P):output:count"){
    field(DESC,"Triggers output so far in set")
    field(SCAN,"1 second")
	field(DTYP,"stream")
    field(INP,"@rosie.proto OutCountQ $(BUS)")
    }
